id: https://w3id.org/peh/peh-model
name: PEH-Model
description: |-
  Entity and relation ontology and datamodel for Personal Exposure and Health data
default_curi_maps:
  - obo_context
  - semweb_context
prefixes:
  peh: https://w3id.org/peh/peh-model
  linkml: https://w3id.org/linkml/
  schema: http://schema.org/
  rdfs: http://www.w3.org/2000/01/rdf-schema#
  prov: http://www.w3.org/ns/prov#
  # DATA PREFIXES
  # P: http://example.org/P/
  # ROR: http://example.org/ror/
  # CODE: http://example.org/code/
  # GEO: http://example.org/geoloc/
default_prefix: peh
default_range: string

emit_prefixes:
  - rdf
  - rdfs
  - xsd
  - skos
imports:
  - linkml:types

classes:
  EntityList:
    tree_root: true
    slots:
      - matrices
      - biochementities
      - biochemgroupings
      - indicators
      - units
      - observablepropertygroups
      - observableproperties

  NamedThing:
    abstract: true
    description: >-
      A generic grouping for any identifiable entity
    slots:
      - id
      - name
      - shortname
      - description
    close_mappings:
     - schema:Thing

  Unit:
    is_a: NamedThing
    slots:
      - same_unit_as
      - quantity_kind
      - vito_aliases
  
  BioChemGrouping:
    is_a: NamedThing
  BioChemEntity:
    class_uri:
      schema:BioChemEntity
    description: >-
      A biological, chemical or biochemical entity that is relevant to the Personal Exposure and Health domain
    is_a: NamedThing
    slots:
      - aliases
      - grouping
      - validation_status
      - validation_actor
      - validation_remark
      - biochemidentifiers
  BioChemIdentifier:
    slots:
      - schema
      - identifier
      - validation_status
      - validation_actor
      - validation_remark
  BioChemIdentifierSchema:
    is_a: NamedThing
    slots:
      - web_uri
  Matrix:
    is_a: NamedThing
    slots:
      - sort_order
      - aggregation_target
      - parent
  Indicator:
    description: >-
      A measurable indicator that is relevant to the Personal Exposure and Health domain
    close_mappings:
      - iop:Variable
    is_a: NamedThing
    slots:
      - indicator_type
      - quantity_kind
      - matrix
      - constraints
      - relevant_observable_entity_types
      - biochementity_links
  BioChemEntityLink:
    slots:
      - biochementity_linktype
      - biochementity

  ObservablePropertyGroup:
    is_a: NamedThing
    slots:
      - sort_order
      - is_abstract
      - parent_groups
  ObservableProperty:
    is_a: NamedThing
    slots:
      - label
      - value_type
      - categorical
      - multivalued
      - value_metadata
      - quantity_kind
      - default_unit
      - default_significantdecimals
      - default_immutable
      - groups
      - relevant_observable_entity_types
      - relevant_observation_design_types
      - indicator
      - calculation_design
      - validation_design
  CalculationDesign:
    slots:
      - unit
      - formula
  ValidationDesign:
    slots:
      - conditional
  ObservablePropertyMetadataElement:
    slots:
      - field
      - value
  ObservablePropertyMetadataField:
    slots:
      - name
      - value_type
  ObservablePropertyMetadataFieldList:
    tree_root: true
    slots:
      - metadata_fields

  Stakeholder:
    is_a: NamedThing
    slots:
      - geographic scope
  Project:
    is_a: NamedThing
    slots:
      - project stakeholders
      - studies
  ProjectStakeholder:
    slots:
      - stakeholder
      - project roles
  Study:
    is_a: NamedThing
    slots:
      - study stakeholders
      - timepoints
      - study entities
  StudyStakeholder:
    slots:
      - stakeholder
      - study roles
  Timepoint:
    is_a: NamedThing
    slots:
      - observations
  StudyEntity:
    abstract: true
    is_a: NamedThing
    slots:
      - study entity links
  StudyEntityLink:
    slots:
      - linktype
      - study entity
  Sample:
    is_a: StudyEntity
    slots:
      - matrix
  StudySubject:
    is_a: StudyEntity
  Person:
    is_a: StudyEntity
  PersonGroup:
    is_a: StudyEntity
  Geolocation:
    is_a: StudyEntity
    slots:
      - location
  Environment:
    is_a: StudyEntity
  Observation:
    slots:
      - observation design
      - observation result
  ObservationDesign:
    abstract: true
    slots:
      - observed entities
      - observable properties
  MetadataDesign:
    is_a: ObservationDesign
  QuestionnaireDesign:
    is_a: ObservationDesign
  SamplingDesign:
    is_a: ObservationDesign
  GeospatialDesign:
    is_a: ObservationDesign
  ObservationResult:
    abstract: true
    slots:
      - observed values
  MetadataResult:
    is_a: ObservationResult
  QuestionnaireResult:
    is_a: ObservationResult
  SamplingResult:
    is_a: ObservationResult
  GeospatialResult:
    is_a: ObservationResult
  ObservedValue:
    slots:
      - observed entity
      - observable property
      - value
      - unit
      - quality or confidence info
      - provenance info

  DataRequest:
    is_a: NamedThing
    slots:
      - contact name
      - contact email
      - contact phone
      - request properties
      - data stakeholders
      - research objectives
      - processing actions
      - processing steps
      - remarks on content
      - remarks on methodology
      - observed entity properties
  ObservedEntityProperty:
    slots:
      - observed entity
      - observable property
  DataStakeholder:
    is_a: NamedThing
    slots:
      - stakeholder
      - data roles
      - processing description
  ResearchObjective:
    is_a: NamedThing
    slots:
      - objective type
      - co-authors
  ProcessingAction:
    is_a: NamedThing
  ProcessingStep:
    is_a: NamedThing
    slots:
      - start date
      - delivery date
  DataExtract:
    slots:
      - observed values

slots:
  id:
    identifier: true
    slot_uri: schema:identifier
  name:
    slot_uri: schema:name
  shortname:
  description:
    slot_uri: schema:description

  units:
    multivalued: true
    inlined_as_list: true
    range: Unit
  same_unit_as:
    range: QudtUnit
  quantity_kind:
    range: QudtQuantityKind
  vito_aliases:
    multivalued: true
    inlined_as_list: true

  biochemgroupings:
    multivalued: true
    inlined_as_list: true
    range: BioChemGrouping
  biochemidentifiers:
    multivalued: true
    inlined_as_list: true
    range: BioChemIdentifier
  biochementities:
    multivalued: true
    inlined_as_list: true
    range: BioChemEntity
  indicators:
    multivalued: true
    inlined_as_list: true
    range: Indicator

  aliases:
    multivalued: true
  grouping: BioChemGrouping
  web_uri:
  schema:
    range: BioChemIdentifierSchema
  identifier:
  validation_status:
    range: ValidationStatus
  validation_actor:
  validation_remark:

  sort_order:
    range: decimal
  aggregation_target:
    range: Boolean
  parent:
    range: Matrix
  indicator_type:
    range: IndicatorType
  matrices:
    multivalued: true
    inlined_as_list: true
    range: Matrix
  matrix:
    range: Matrix
  constraints:
    multivalued: true
    inlined_as_list: true
  relevant_observable_entity_types:
    multivalued: true
    inlined_as_list: true
    range: ObservableEntityType
  biochementity_links:
    multivalued: true
    inlined_as_list: true
    range: BioChemEntityLink
  biochementity_linktype:
    range: BioChemEntityLinkType
  biochementity:
    range: BioChemEntity

  observablepropertygroups:
    multivalued: true
    inlined_as_list: true
    range: ObservablePropertyGroup
  observableproperties:
    multivalued: true
    inlined_as_list: true
    range: ObservableProperty
  label:
  categorical:
    range: Boolean
  multivalued:
    range: Boolean
  is_abstract:
    range: Boolean
  parent_groups:
    multivalued: true
    range: ObservablePropertyGroup
  value_type:
    range: xsd:type
  value_metadata:
    multivalued: true
    inlined_as_list: true
    range: ObservablePropertyMetadataElement
  default_immutable:
    range: Boolean
  default_significantdecimals:
    range: int
  default_unit:
  groups:
    multivalued: true
    range: ObservablePropertyGroup
  relevant_observation_design_types:
    multivalued: true
    range: ObservationDesignType
  indicator:
    range: Indicator
  calculation_design:
    range: CalculationDesign
  validation_design:
    range: ValidationDesign
  formula:
  conditional:
  field:
    range: ObservablePropertyMetadataField
  value:
  metadata_fields:
    multivalued: true
    inlined_as_list: true
    range: ObservablePropertyMetadataField

  geographic scope:
  project:
    slot_uri: schema:ResearchProject
  stakeholder:
    range: Stakeholder
  project stakeholders:
    multivalued: true
    inlined_as_list: true
    range: ProjectStakeholder
  studies:
    multivalued: true
    range: Study
  project roles:
    multivalued: true
    inlined_as_list: true
    range: ProjectRole
  study stakeholders:
    multivalued: true
    range: StudyStakeholder
  study roles:
    multivalued: true
    inlined_as_list: true
    range: StudyRole
  timepoints:
    multivalued: true
    range: Timepoint
  study entities:
    multivalued: true
    range: StudyEntity
  observations:
    multivalued: true
    range: Observation
  study entity links:
    multivalued: true
    range: StudyEntityLink
  linktype:
    range: LinkType
  study entity:
    range: StudyEntity
  location:
  observation design:
    range: ObservationDesign
  observation result:
    range: ObservationResult
  observed entities:
    multivalued: true
    range: StudyEntity
  observable properties:
    multivalued: true
    range: ObservableProperty
  observed values:
    multivalued: true
    range: ObservedValue
  observed entity:
    range: StudyEntity
  observable property:
    range: ObservableProperty
  unit:
    range: Unit
  quality or confidence info:
  provenance info:

  data roles:
    multivalued: true
    inlined_as_list: true
    range: DataRole
  contact name:
  contact email:
  contact phone:
  request properties:
  data stakeholders:
    multivalued: true
    range: DataStakeholder
  research objectives:
    multivalued: true
    range: ResearchObjective
  processing actions:
    multivalued: true
    range: ProcessingAction
  processing steps:
    multivalued: true
    range: ProcessingStep
  remarks on content:
    multivalued: true
  remarks on methodology:
    multivalued: true
  observed entity properties:
    multivalued: true
    range: ObservedEntityProperty
  processing description:
  objective type:
    range: ObjectiveType
  co-authors:
    multivalued: true
  start date:
  delivery date:

enums:
  QudtUnit:
    reachable_from:
      source_ontology: qudt
      source_nodes:
        - qudt:Unit
      include_self: false
      relationship_types:
        - rdfs:subClassOf
  QudtQuantityKind:
    reachable_from:
      source_ontology: qudt
      source_nodes:
        - qudt:QuantityKind
      include_self: false
      relationship_types:
        - rdfs:subClassOf

  ValidationStatus:
    permissible_values:
      UNVALIDATED:
      IN PROGRESS:
      VALIDATED:
  IndicatorType:
    permissible_values:
      EFFECTMARKER:
      EXPOSUREMARKER:
      GEOMARKER:
      OBSERVATION:
  BioChemEntityLinkType:
    permissible_values:
      EXACT_MATCH:
      CLOSE_MATCH:
      BROADER:
      PART_OF:
      GROUP_CONTAINS:
  ObservableEntityType:
    permissible_values:
      PERSON:
      PERSONGROUP:
      ENVIRONMENT:
      LOCATION:
      STUDY:
      DATASET:
      SAMPLE:
  ObservationDesignType:
    permissible_values:
      SAMPLE:
      QUESTIONNAIRE:
      GEOSPATIAL:
      METADATA:
  ProjectRole:
    permissible_values:
      SUBSIDISING_PARTY:
      PRINCIPAL_INVESTIGATOR:
      DATA_CONTROLLER:
      DATA_PROCESSOR:
      DATA_USER:
  StudyRole:
    permissible_values:
      SUBSIDISING_PARTY:
      PRINCIPAL_INVESTIGATOR:
      DATA_CONTROLLER:
      DATA_PROCESSOR:
      DATA_USER:
  DataRole:
    permissible_values:
      MAIN_STAKEHOLDER:
      SUPPLYING_DATA_CONTROLLER:
      RECEIVING_DATA_CONTROLLER:
      EXTERNAL_DATA_PROCESSOR:
  ObjectiveType:
    permissible_values:
      RESEARCH_OBJECTIVE:
      PROJECT_RESULT:
      PUBLICATION:
  LinkType:
    permissible_values:
      IS_SAME_AS:
      IS_PART_OF:
      IS_LOCATED_AT:

# TODO: model how the I-Adopt Variable the indicator can be linked to the appropriate I-Adopt object_of_interest [1..1] and context_object(s) [0..n]
