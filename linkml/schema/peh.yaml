id: https://w3id.org/peh/peh-model
name: PEH-Model
description: |-
  Entity and relation ontology and datamodel for Personal Exposure and Health data

prefixes:
  peh: https://w3id.org/peh/peh-model
  linkml: https://w3id.org/linkml/
  schema: http://schema.org/
  rdfs: http://www.w3.org/2000/01/rdf-schema#
  prov: http://www.w3.org/ns/prov#
  qudt: http://qudt.org/2.1/schema/qudt
  qudtqk:   http://qudt.org/2.1/vocab/quantitykind
  # DATA PREFIXES
  # P: http://example.org/P/
  # ROR: http://example.org/ror/
  # CODE: http://example.org/code/
  # GEO: http://example.org/geoloc/

default_prefix: peh
default_range: string

default_curi_maps:
  - obo_context
  - semweb_context

imports:
  - linkml:types

classes:
  EntityList:
    tree_root: true
    slots:
      - matrices
      - metadata_fields
      - biochementities
      - groupings
      - indicators
      - units
      - observable_properties
      - stakeholders
      - projects
      - studies
      - timepoints

  NamedThing:
    abstract: true
    description: >-
      A generic grouping for any identifiable entity
    slots:
      - id
      - unique_name
      - name
      - description
      - label
      - remark
    close_mappings:
     - schema:Thing

  Grouping:
    is_a: NamedThing
    mixins:
      - HasContextAliases
      - HasTranslations
    slots:
      - sort_order
      - is_abstract
      - parent_grouping_id_list

  HasValidationStatus:
    mixin: true
    slots:
      - current_validation_status
      - validation_history
  ValidationHistoryRecord:
    slots:
      - validation_datetime
      - validation_status
      - validation_actor
      - validation_institute
      - validation_remark

  HasAliases:
    mixin: true
    slots:
      - aliases
  HasContextAliases:
    mixin: true
    slots:
      - context_aliases
  ContextAlias:
    slots:
      - context
      - alias
  HasTranslations:
    mixin: true
    slots:
      - translations
  Translation:
    slots:
      - property_name
      - language
      - translated_value

  Unit:
    is_a: NamedThing
    mixins:
      - HasContextAliases
      - HasTranslations
    slots:
      - same_unit_as
      - quantity_kind
  
  BioChemEntity:
    class_uri:
      schema:BioChemEntity
    description: >-
      A biological, chemical or biochemical entity that is relevant to the Personal Exposure and Health domain
    is_a: NamedThing
    mixins:
      - HasAliases
      - HasContextAliases
      - HasTranslations
      - HasValidationStatus
    slots:
      - grouping
      - biochemidentifiers
      - biochementity_links
  BioChemIdentifier:
    mixins:
      - HasValidationStatus
    slots:
      - identifier_schema
      - identifier_code
  BioChemIdentifierSchema:
    is_a: NamedThing
    slots:
      - web_uri
  Matrix:
    is_a: NamedThing
    mixins:
      - HasContextAliases
      - HasTranslations
    slots:
      - sort_order
      - aggregation_target
      - parent_matrix
  Indicator:
    description: >-
      A measurable indicator that is relevant to the Personal Exposure and Health domain
    close_mappings:
      - iop:Variable
    is_a: NamedThing
    slots:
      - indicator_type
      - quantity_kind
      - matrix
      - constraints
      - relevant_observable_entity_types
      - biochementity_links
  BioChemEntityLink:
    slots:
      - biochementity_linktype
      - biochementity

  ObservableProperty:
    is_a: NamedThing
    mixins:
      - HasTranslations
    slots:
      - value_type
      - categorical
      - multivalued
      - value_options
      - value_metadata
      - quantity_kind
      - default_unit
      - default_significantdecimals
      - default_immutable
      - grouping_id_list
      - relevant_observable_entity_types
      - relevant_observation_types
      - indicator
      - calculation_design
      - validation_design
  ObservablePropertyValueOption:
    mixins:
      - HasContextAliases
    slots:
      - key
      - value
      - label
  ObservablePropertyMetadataElement:
    slots:
      - field
      - value
  ObservablePropertyMetadataField:
    is_a: NamedThing
    slots:
      - value_type
  CalculationDesign:
    slots:
      - unit
      - formula
  ValidationDesign:
    slots:
      - conditional

  Contact:
    mixins:
      - HasContextAliases
    slots:
      - name
      - orcid
      - contact_roles
      - contact_email
      - contact_phone
  Stakeholder:
    is_a: NamedThing
    mixins:
      - HasTranslations
    slots:
      - rorid
      - geographic_scope
  Project:
    is_a: StudyEntity
    mixins:
      - HasTranslations
      - HasContextAliases
    slots:
      - default_language
      - project_stakeholders
      - start_date
      - end_date
      - study_id_list
  ProjectStakeholder:
    slots:
      - stakeholder
      - project_roles
      - contacts
    mixins:
      - HasTranslations
  StudyEntity:
    abstract: true
    is_a: NamedThing
    mixins:
      - HasContextAliases
    slots:
      - study_entity_links
  StudyEntityLink:
    slots:
      - linktype
      - study_entity
  Study:
    is_a: StudyEntity
    mixins:
      - HasTranslations
    slots:
      - default_language
      - study_stakeholders
      - start_date
      - end_date
      - timepoint_id_list
      - study_entities
      - project_id_list
  StudyStakeholder:
    slots:
      - stakeholder
      - study_roles
      - contacts
  Timepoint:
    is_a: StudyEntity
    slots:
      - sort_order
      - start_date
      - end_date
      - observations
  StudyPopulation:
    is_a: StudyEntity
    slots:
      - research_population_type
  SampleCollection:
    is_a: StudyEntity
    slots:
      - matrix
      - constraints
  Sample:
    is_a: StudyEntity
    slots:
      - matrix
      - constraints
      - sampled_in_project
      - physical_label
      - collection_date
  StudySubject:
    is_a: StudyEntity
  Person:
    is_a: StudyEntity
    slots:
      - recruited_in_project
  PersonGroup:
    is_a: StudyEntity
  Geolocation:
    is_a: StudyEntity
    slots:
      - location
  Environment:
    is_a: StudyEntity
  Observation:
    abstract: true
    is_a: NamedThing
    slots:
      - observation_type
      - observation_design
      - observation_result
  MetadataObservation:
    is_a: Observation
  QuestionnaireObservation:
    is_a: Observation
  SamplingObservation:
    is_a: Observation
  GeospatialObservation:
    is_a: Observation
  ObservationDesign:
    slots:
      - observable_entity_property_sets
  MetadataDesign:
    is_a: ObservationDesign
  QuestionnaireDesign:
    is_a: ObservationDesign
  SamplingDesign:
    is_a: ObservationDesign
  GeospatialDesign:
    is_a: ObservationDesign
  ObservableEntityPropertySet:
    slots:
      - observable_entity_type
      - observable_entity_id_list
      - observable_property_id_list
  ObservationResult:
    slots:
      - observed_values
  MetadataResult:
    is_a: ObservationResult
  QuestionnaireResult:
    is_a: ObservationResult
  SamplingResult:
    is_a: ObservationResult
  GeospatialResult:
    is_a: ObservationResult
  ObservedValue:
    slots:
      - observable_entity
      - observable_property
      - value
      - unit
      - quality_data
      - provenance_data
  QualityData:
    slots:
      - quality_context_key
      - quality_value
  ProvenanceData:
    slots:
      - provenance_context_key
      - provenance_value

  DataRequest:
    is_a: NamedThing
    slots:
      - contacts
      - request_properties
      - data_stakeholders
      - research_objectives
      - processing_actions
      - processing_steps
      - remark_on_content
      - remark_on_methodology
      - observed_entity_properties
  ObservedEntityProperty:
    slots:
      - observable_entity
      - observable_property
  DataStakeholder:
    is_a: NamedThing
    slots:
      - stakeholder
      - data_roles
      - contacts
      - processing_description
  ResearchObjective:
    is_a: NamedThing
    slots:
      - objective_type
      - authors
  ProcessingAction:
    is_a: NamedThing
  ProcessingStep:
    is_a: NamedThing
    slots:
      - start_date
      - delivery_date
  DataExtract:
    slots:
      - observed_values

slots:
  id:
    identifier: true
    slot_uri: schema:identifier
  unique_name:
  name:
    slot_uri: schema:name
  description:
    slot_uri: schema:description
  label:
    slot_uri: rdfs:label
  remark:

  orcid:
  rorid:
  alias:
  aliases:
    multivalued: true
    inlined_as_list: true
  context_aliases:
    multivalued: true
    inlined_as_list: true
    range: ContextAlias
  context:
    range: NamedThing
    inlined: false
  translations:
    multivalued: true
    inlined_as_list: true
    range: Translation
  property_name:
  language:
  translated_value:

  validation_history:
    multivalued: true
    inlined_as_list: true
    range: ValidationHistoryRecord

  units:
    multivalued: true
    inlined_as_list: true
    range: Unit
  same_unit_as:
    range: QudtUnit
  quantity_kind:
    range: QudtQuantityKind

  grouping:
    range: Grouping
    inlined: false
  groupings:
    multivalued: true
    inlined_as_list: true
    range: Grouping
  grouping_id_list:
    multivalued: true
    range: Grouping
  parent_grouping_id_list:
    multivalued: true
    range: Grouping
  biochemidentifiers:
    multivalued: true
    inlined_as_list: true
    range: BioChemIdentifier
  biochementities:
    multivalued: true
    inlined_as_list: true
    range: BioChemEntity
  indicators:
    multivalued: true
    inlined_as_list: true
    range: Indicator

  web_uri:
  identifier_schema:
    range: BioChemIdentifierSchema
  identifier_code:
  current_validation_status:
    range: ValidationStatus
  validation_datetime:
    range: datetime
  validation_status:
    range: ValidationStatus
  validation_actor:
  validation_institute:
  validation_remark:

  sort_order:
    range: decimal
  aggregation_target:
    range: boolean
  parent_matrix:
    range: Matrix
  indicator_type:
    range: IndicatorType
  matrices:
    multivalued: true
    inlined_as_list: true
    range: Matrix
  matrix:
    range: Matrix
  constraints:
    multivalued: true
  relevant_observable_entity_types:
    multivalued: true
    range: ObservableEntityType
  biochementity_links:
    multivalued: true
    inlined_as_list: true
    range: BioChemEntityLink
  biochementity_linktype:
    range: BioChemEntityLinkType
  biochementity:
    range: BioChemEntity
    inlined: false

  categorical:
    range: boolean
  multivalued:
    range: boolean
  is_abstract:
    range: boolean
  value_type:
  value_metadata:
    multivalued: true
    inlined_as_list: true
    range: ObservablePropertyMetadataElement
  value_options:
    multivalued: true
    inlined_as_list: true
    range: ObservablePropertyValueOption
  default_immutable:
    range: boolean
  default_significantdecimals:
    range: integer
  default_unit:
  relevant_observation_types:
    multivalued: true
    range: ObservationType
  indicator:
    range: Indicator
  calculation_design:
    range: CalculationDesign
  validation_design:
    range: ValidationDesign
  formula:
  conditional:
  field:
    range: ObservablePropertyMetadataField
    inlined: false
  key:
  value:
  metadata_fields:
    multivalued: true
    inlined_as_list: true
    range: ObservablePropertyMetadataField

  stakeholders:
    multivalued: true
    inlined_as_list: true
    range: Stakeholder
  project_id_list:
    multivalued: true
    range: Project
  projects:
    multivalued: true
    inlined_as_list: true
    range: Project
  geographic_scope:
  project:
    slot_uri: schema:ResearchProject
  default_language:
  stakeholder:
    range: Stakeholder
  project_stakeholders:
    multivalued: true
    inlined_as_list: true
    range: ProjectStakeholder
  study_id_list:
    multivalued: true
    range: Study
  studies:
    multivalued: true
    inlined_as_list: true
    range: Study
  project_roles:
    multivalued: true
    range: ProjectRole
  study_stakeholders:
    multivalued: true
    inlined_as_list: true
    range: StudyStakeholder
  research_population_type:
    range: ResearchPopulationType
  study_roles:
    multivalued: true
    range: StudyRole
  timepoint_id_list:
    multivalued: true
    range: Timepoint
  timepoints:
    multivalued: true
    inlined_as_list: true
    range: Timepoint
  study_entities:
    multivalued: true
    range: StudyEntity
  observations:
    multivalued: true
    inlined_as_list: true
    range: Observation
  study_entity_links:
    multivalued: true
    range: StudyEntityLink
  linktype:
    range: LinkType
  study_entity:
    range: StudyEntity
    inlined: false
  recruited_in_project:
    range: Project
    inlined: false
  sampled_in_project:
    range: Project
    inlined: false
  physical_label:
  location:
  observation_type:
    range: ObservationType
  observation_design:
    range: ObservationDesign
  observable_entity_property_sets:
    multivalued: true
    range: ObservableEntityPropertySet
  observation_result:
    range: ObservationResult
  observable_entity_type:
    range: ObservableEntityType
  observable_entity_id_list:
    multivalued: true
    range: StudyEntity
  observable_entities:
    multivalued: true
    inlined_as_list: true
    range: StudyEntity
  observable_entity:
    range: StudyEntity
  observable_property_id_list:
    multivalued: true
    range: ObservableProperty
  observable_properties:
    multivalued: true
    inlined_as_list: true
    range: ObservableProperty
  observable_property:
    range: ObservableProperty
  observed_values:
    multivalued: true
    inlined_as_list: true
    range: ObservedValue
  unit:
    range: Unit
  quality_data:
    multivalued: true
    inlined_as_list: true
    range: QualityData
  quality_context_key:
  quality_value:
  provenance_data:
    multivalued: true
    inlined_as_list: true
    range: ProvenanceData
  provenance_context_key:
  provenance_value:

  data_roles:
    multivalued: true
    range: DataRole
  contacts:
    multivalued: true
    inlined_as_list: true
    range: Contact
  contact_roles:
    multivalued: true
    range: ContactRole
  contact_email:
  contact_phone:
  request_properties:
  data_stakeholders:
    multivalued: true
    range: DataStakeholder
  research_objectives:
    multivalued: true
    range: ResearchObjective
  processing_actions:
    multivalued: true
    range: ProcessingAction
  processing_steps:
    multivalued: true
    range: ProcessingStep
  remark_on_content:
  remark_on_methodology:
  observed_entity_properties:
    multivalued: true
    range: ObservedEntityProperty
  processing_description:
  objective_type:
    range: ObjectiveType
  authors:
    multivalued: true
  start_date:
    range: date
  end_date:
    range: date
  delivery_date:
    range: date
  collection_date:
    range: date

enums:
  ValidationStatus:
    permissible_values:
      unvalidated:
      in_progress:
      validated:
  # Types
  IndicatorType:
    permissible_values:
      effectmarker:
      exposuremarker:
      geomarker:
      observation:
  BioChemEntityLinkType:
    permissible_values:
      exact_match:
      close_match:
      broader:
      part_of:
      group_contains:
      has_parent_compound:
      branched_version_of:
  ResearchPopulationType:
    permissible_values:
      general_population:
      person:
      newborn:
      adolescent:
      mother:
      parent:
      pregnant_person:
      household:
  ObservableEntityType:
    permissible_values:
      person:
      persongroup:
      environment:
      location:
      study:
      dataset:
      sample:
  ObservationType:
    permissible_values:
      sampling:
      questionnaire:
      geospatial:
      metadata:
  ObjectiveType:
    permissible_values:
      research_objective:
      project_result:
      publication:
  LinkType:
    permissible_values:
      is_about:
      is_same_as:
      is_part_of:
      is_located_at:
  # Roles
  ContactRole:
    permissible_values:
      administrative:
      data:
      general:
      lead:
      legal:
      technical:
  ProjectRole:
    permissible_values:
      member:
      partner:
      funding_partner:
      principal_investigator:
      data_governance:
      data_controller:
      data_processor:
      data_user:
  StudyRole:
    permissible_values:
      funding_partner:
      principal_investigator:
      data_controller:
      data_processor:
      data_user:
  DataRole:
    permissible_values:
      main_stakeholder:
      supplying_data_controller:
      receiving_data_controller:
      external_data_controller:
  # Ontology Based
  QudtUnit:
    reachable_from:
      source_ontology: qudt
      source_nodes:
        - qudt:Unit
      include_self: false
      relationship_types:
        - rdfs:subClassOf
  QudtQuantityKind:
    permissible_values:
      MassConcentration:
        meaning: qudtqk:MassConcentration
      Period:
        meaning: qudtqk:Period
    include:
    - reachable_from:
        source_ontology: qudtqk
        source_nodes:
          - qudtqk:QuantityKind
        include_self: false
        relationship_types:
          - rdfs:subClassOf

# TODO: model how the I-Adopt Variable the indicator can be linked to the appropriate I-Adopt object_of_interest [1..1] and context_object(s) [0..n]
